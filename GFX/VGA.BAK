#include <string.h>
#include <dos.h>
#include "vga.h"

/* ASM from your files */
void vga_blit(const void *src, u32 nbytes);             /* CV_BLIT.ASM */
void vga_set_palette256(const unsigned char *dac3x256); /* CV_HW.ASM   */
void vsync_wait(void);                                  /* CV_HW.ASM   */

void vga_set_mode13h(void)
{
    union REGS r;
    r.h.ah = 0x00;
    r.h.al = 0x13;
    int386(0x10, &r, &r);
}
void vga_reset_text(void)
{
    union REGS r;
    r.h.ah = 0x00;
    r.h.al = 0x03;
    int386(0x10, &r, &r);
}
void vga_blit_8(const unsigned char *buf)
{
    /* ALWAYS use your ASM path; no DPMI 0x0800 mapping, no gating */
    vga_blit(buf, 64000UL); /* copies to A000:0000 every frame */
}
